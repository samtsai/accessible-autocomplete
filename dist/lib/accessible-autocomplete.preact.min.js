!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("preact")):"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Autocomplete=t(require("preact")):e.Autocomplete=t(e.preact)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var u=n[o]={i:o,l:!1,exports:{}};return e[o].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=3)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function o(e,t){}function u(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){"function"!=typeof t&&null!==t||(e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t))}function r(){return!(!navigator.userAgent.match(/(iPod|iPhone|iPad)/g)||!navigator.userAgent.match(/AppleWebKit/g))}function i(e){return e>47&&e<58||32===e||8===e||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223}t.__esModule=!0,t.default=void 0;var a,s,p=n(0),c=n(2),h=function(e){return e&&e.__esModule?e:{default:e}}(c),d={13:"enter",27:"escape",38:"up",40:"down"},f=function(){var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),m=(s=a=function(e){function t(n){o(this,t);var l=u(this,e.call(this,n));return l.elementRefs={},l.state={focused:null,hovered:null,menuOpen:!1,options:n.defaultValue?[n.defaultValue]:[],query:n.defaultValue,selected:null},l.handleComponentBlur=l.handleComponentBlur.bind(l),l.handleKeyDown=l.handleKeyDown.bind(l),l.handleUpArrow=l.handleUpArrow.bind(l),l.handleDownArrow=l.handleDownArrow.bind(l),l.handleEnter=l.handleEnter.bind(l),l.handlePrintableKey=l.handlePrintableKey.bind(l),l.handleOptionClick=l.handleOptionClick.bind(l),l.handleOptionFocusOut=l.handleOptionFocusOut.bind(l),l.handleOptionFocus=l.handleOptionFocus.bind(l),l.handleOptionMouseDown=l.handleOptionMouseDown.bind(l),l.handleOptionMouseEnter=l.handleOptionMouseEnter.bind(l),l.handleOptionMouseOut=l.handleOptionMouseOut.bind(l),l.handleOptionTouchEnd=l.handleOptionTouchEnd.bind(l),l.handleInputBlur=l.handleInputBlur.bind(l),l.handleInputChange=l.handleInputChange.bind(l),l.handleInputFocus=l.handleInputFocus.bind(l),l.pollInputElement=l.pollInputElement.bind(l),l.getDirectInputChanges=l.getDirectInputChanges.bind(l),l}return l(t,e),t.prototype.componentDidMount=function(){this.pollInputElement()},t.prototype.componentWillUnmount=function(){clearTimeout(this.$pollInput)},t.prototype.pollInputElement=function(){var e=this;this.getDirectInputChanges(),this.$pollInput=setTimeout(function(){e.pollInputElement()},100)},t.prototype.getDirectInputChanges=function(){var e=this.elementRefs[-1];e.value!==this.state.query&&this.handleInputChange({target:{value:e.value}})},t.prototype.componentDidUpdate=function(e,t){var n=this.state.focused,o=null===n,u=t.focused!==n;u&&!o&&this.elementRefs[n].focus();var l=-1===n,r=u&&null===t.focused;if(l&&r){var i=this.elementRefs[n];i.setSelectionRange(0,i.value.length)}},t.prototype.hasAutoselect=function(){return!r()&&this.props.autoselect},t.prototype.templateInputValue=function(e){var t=this.props.templates&&this.props.templates.inputValue;return t?t(e):e},t.prototype.templateSuggestion=function(e){var t=this.props.templates&&this.props.templates.suggestion;return t?t(e):e},t.prototype.handleComponentBlur=function(e){var t=this.state,n=t.options,o=t.query,u=t.selected,l=void 0;this.props.confirmOnBlur?(l=e.query||o,this.props.onConfirm(n[u])):l=o,this.setState({focused:null,menuOpen:e.menuOpen||!1,query:l,selected:null})},t.prototype.handleOptionFocusOut=function(e,t){var n=this.state,o=n.focused,u=n.menuOpen,l=n.options,i=n.selected,a=null===e.relatedTarget,s=e.relatedTarget===this.elementRefs[-1],p=o!==t&&-1!==o;if(a||!p&&!s){var c=u&&r();this.handleComponentBlur({menuOpen:c,query:this.templateInputValue(l[i])})}},t.prototype.handleInputBlur=function(e){var t=this.state,n=t.focused,o=t.menuOpen,u=t.options,l=t.query,i=t.selected;if(-1===n){var a=o&&r(),s=r()?l:this.templateInputValue(u[i]);this.handleComponentBlur({menuOpen:a,query:s})}},t.prototype.handleInputChange=function(e){var t=this,n=this.props,o=n.minLength,u=n.source,l=this.hasAutoselect(),r=e.target.value,i=0===r.length,a=this.state.query.length!==r.length,s=r.length>=o;this.setState({query:r}),!i&&a&&s?u(r,function(e){var n=e.length>0;t.setState({menuOpen:n,options:e,selected:l&&n?0:-1})}):!i&&s||this.setState({menuOpen:!1,options:[]})},t.prototype.handleInputFocus=function(e){this.setState({focused:-1})},t.prototype.handleOptionFocus=function(e){this.setState({focused:e,hovered:null,selected:e})},t.prototype.handleOptionMouseEnter=function(e,t){this.setState({hovered:t})},t.prototype.handleOptionMouseOut=function(e,t){this.setState({hovered:null})},t.prototype.handleOptionTouchEnd=function(e,t){this.handleOptionClick(e,t)},t.prototype.handleOptionClick=function(e,t){var n=this.state.options[t],o=this.templateInputValue(n);this.props.onConfirm(n),this.setState({focused:-1,menuOpen:!1,query:o,selected:-1})},t.prototype.handleOptionMouseDown=function(e){e.preventDefault()},t.prototype.handleUpArrow=function(e){e.preventDefault();var t=this.state,n=t.menuOpen,o=t.selected;-1!==o&&n&&this.handleOptionFocus(o-1)},t.prototype.handleDownArrow=function(e){e.preventDefault();var t=this.state,n=t.menuOpen,o=t.options,u=t.selected;u!==o.length-1&&n&&this.handleOptionFocus(u+1)},t.prototype.handleEnter=function(e){this.state.menuOpen&&(e.preventDefault(),this.state.selected>=0&&this.handleOptionClick(e,this.state.selected))},t.prototype.handlePrintableKey=function(e){var t=this.elementRefs[-1];e.target===t||this.handleInputFocus()},t.prototype.handleKeyDown=function(e){switch(d[e.keyCode]){case"up":this.handleUpArrow(e);break;case"down":this.handleDownArrow(e);break;case"enter":this.handleEnter(e);break;case"escape":this.handleComponentBlur({query:this.state.query});break;default:i(e.keyCode)&&this.handlePrintableKey(e)}},t.prototype.render=function(){var e=this,t=this.props,n=t.cssNamespace,o=t.displayMenu,u=t.id,l=t.minLength,r=t.name,i=t.placeholder,a=this.state,s=a.focused,c=a.hovered,d=a.menuOpen,m=a.options,y=a.query,O=a.selected,g=this.hasAutoselect(),b=-1===s,v=0===m.length,w=0!==y.length,_=y.length>=l,E=this.props.showNoOptionsFound&&b&&v&&w&&_,I=n+"__wrapper",C=n+"__input",x=null!==s,D=x?" "+C+"--focused":"",M=-1!==s&&null!==s,q=n+"__menu",F=q+"--"+o,A=d||E,P=q+"--"+(A?"visible":"hidden"),S=n+"__option",B=n+"__hint",j=this.templateInputValue(m[O]),k=j&&0===j.toLowerCase().indexOf(y.toLowerCase()),L=k&&g?y+j.substr(y.length):"",N=f&&L;return(0,p.createElement)("div",{className:I,onKeyDown:this.handleKeyDown},(0,p.createElement)(h.default,{length:m.length,queryLength:y.length,minQueryLength:l,selectedOption:this.templateInputValue(m[O])}),N&&(0,p.createElement)("span",null,(0,p.createElement)("input",{className:B,readonly:!0,tabindex:"-1",value:L})),(0,p.createElement)("input",{"aria-activedescendant":!!M&&u+"__option--"+s,"aria-expanded":d,"aria-owns":u+"__listbox",autocomplete:"off",className:""+C+D,id:u,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onInput:this.handleInputChange,name:r,placeholder:i,ref:function(t){e.elementRefs[-1]=t},role:"combobox",type:"text",value:y}),(0,p.createElement)("ul",{className:q+" "+F+" "+P,id:u+"__listbox",role:"listbox"},m.map(function(t,n){var o=-1===s?O===n:s===n,l=o&&null===c?" "+S+"--focused":"",r=n%2?" "+S+"--odd":"";return(0,p.createElement)("li",{"aria-selected":s===n,className:""+S+l+r,dangerouslySetInnerHTML:{__html:e.templateSuggestion(t)},id:u+"__option--"+n,onClick:function(t){return e.handleOptionClick(t,n)},onFocusOut:function(t){return e.handleOptionFocusOut(t,n)},onMouseDown:e.handleOptionMouseDown,onMouseEnter:function(t){return e.handleOptionMouseEnter(t,n)},onMouseOut:function(t){return e.handleOptionMouseOut(t,n)},onTouchEnd:function(t){return e.handleOptionTouchEnd(t,n)},ref:function(t){e.elementRefs[n]=t},role:"option",tabindex:"-1"})}),E&&(0,p.createElement)("li",{className:S+" "+S+"--no-results"},"No results found")))},t}(p.Component),a.defaultProps={autoselect:!1,cssNamespace:"autocomplete",defaultValue:"",displayMenu:"inline",id:"autocomplete",minLength:0,name:"input-autocomplete",placeholder:"",onConfirm:function(){},confirmOnBlur:!0,showNoOptionsFound:!0},s);t.default=m},function(e,t,n){"use strict";function o(e,t){}function u(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){"function"!=typeof t&&null!==t||(e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t))}t.__esModule=!0,t.default=void 0;var r=n(0),i=function(e){function t(){var n,l,r;o(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=l=u(this,e.call.apply(e,[this].concat(a))),l.state={bump:!1},r=n,u(l,r)}return l(t,e),t.prototype.componentWillReceiveProps=function(e){e.queryLength!==this.props.queryLength&&this.setState(function(e){return{bump:!e.bump}})},t.prototype.render=function(){var e=this.props,t=e.length,n=e.queryLength,o=e.minQueryLength,u=e.selectedOption,l=this.state.bump,i={result:1===t?"result":"results",is:1===t?"is":"are"},a=n<o,s=0===t,p=u?(0,r.createElement)("span",null,u," (1 of ",t,") is selected."):null,c=null;return c=a?(0,r.createElement)("span",null,"Type in ",o," or more characters for results."):s?(0,r.createElement)("span",null,"No search results."):(0,r.createElement)("span",null,t," ",i.result," ",i.is," available. ",p),(0,r.createElement)("div",{"aria-atomic":"true","aria-live":"polite",role:"status",style:{border:"0",clip:"rect(0 0 0 0)",height:"1px",marginBottom:"-1px",marginRight:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},c,(0,r.createElement)("span",null,l?",":",,"))},t}(r.Component);t.default=i},function(e,t,n){e.exports=n(1)}])});
//# sourceMappingURL=accessible-autocomplete.preact.min.js.map